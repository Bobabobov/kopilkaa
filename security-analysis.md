# –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π

## ‚úÖ –•–û–†–û–®–ò–ï –ù–û–í–û–°–¢–ò: –í–∞—à —Å–∞–π—Ç –ó–ê–©–ò–©–ï–ù –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π!

### üõ°Ô∏è –ü–æ—á–µ–º—É –≤–∞—à —Å–∞–π—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω:

#### 1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Prisma ORM**

- ‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ **Prisma ORM**
- ‚úÖ Prisma –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **—ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç** –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö **raw SQL –∑–∞–ø—Ä–æ—Å–æ–≤** –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

#### 2. **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞**

**–ü—Ä–∏–º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫–æ–¥–∞ –∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**

```typescript
// ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û - Prisma –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç
const user = await prisma.user.findUnique({
  where: { email }, // email –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω
});

// ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å
const users = await prisma.user.findMany({
  where: {
    OR: [
      { name: { contains: query } }, // query —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω
      { email: { contains: query } },
    ],
  },
});

// ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º
if (!email || !password) {
  return Response.json({ error: "–í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å" }, { status: 400 });
}
```

#### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–ø–∞—Å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤**

- ‚ùå –ù–µ—Ç `$queryRaw()` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ùå –ù–µ—Ç `$executeRaw()` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ùå –ù–µ—Ç `eval()` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ùå –ù–µ—Ç `JSON.parse()` —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ùå –ù–µ—Ç –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫ –≤ SQL - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

#### 4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

```typescript
// ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –∏ –ª–∏–º–∏—Ç–æ–≤
if (!title || title.length > titleMax) {
  return Response.json(
    { error: `–ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (‚â§ ${titleMax})` },
    { status: 400 },
  );
}

// ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
if (!amount || isNaN(parseInt(amount)) || parseInt(amount) < 1) {
  return Response.json(
    { error: `–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 1 –¥–æ 1 000 000 —Ä—É–±–ª–µ–π` },
    { status: 400 },
  );
}
```

### üîç –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ API endpoints:

| Endpoint                  | –°—Ç–∞—Ç—É—Å       | –ú–µ—Ç–æ–¥ –∑–∞—â–∏—Ç—ã         |
| ------------------------- | ------------ | -------------------- |
| `/api/auth/login`         | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω | Prisma + bcrypt      |
| `/api/auth/register`      | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω | Prisma + –≤–∞–ª–∏–¥–∞—Ü–∏—è   |
| `/api/users/search`       | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω | Prisma where clauses |
| `/api/applications`       | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω | Prisma + –≤–∞–ª–∏–¥–∞—Ü–∏—è   |
| `/api/stories`            | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω | Prisma search        |
| `/api/admin/applications` | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω | Prisma + —Ñ–∏–ª—å—Ç—Ä—ã     |

### üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–π –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º –∫ –¥–∞–Ω–Ω—ã–º
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –∏ –ª–∏–º–∏—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
3. **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**: bcrypt –¥–ª—è –ø–∞—Ä–æ–ª–µ–π
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –õ–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö

### üìä –ó–∞–∫–ª—é—á–µ–Ω–∏–µ:

**–í–∞—à —Å–∞–π—Ç –ù–ï –£–Ø–ó–í–ò–ú –∫ SQL-–∏–Ω—ä–µ–∫—Ü–∏—è–º** –±–ª–∞–≥–æ–¥–∞—Ä—è:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é Prisma ORM
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏—é raw SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. **–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Prisma** –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
2. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** `$queryRaw()` –±–µ–∑ –∫—Ä–∞–π–Ω–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
3. **–í—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–≤–∫–ª—é—á–∞—è Prisma)
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TypeScript** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

---

**–í–µ—Ä–¥–∏–∫—Ç: üü¢ –ë–ï–ó–û–ü–ê–°–ù–û** - SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã —Å —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π!
