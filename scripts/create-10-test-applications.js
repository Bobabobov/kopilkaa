// scripts/create-10-test-applications.js
const { PrismaClient } = require('@prisma/client');

const prisma = new PrismaClient();

// Массив тестовых заявок с разным количеством текста
const testApplications = [
  {
    title: "Срочно нужна помощь на лечение",
    summary: "Операция для ребенка",
    description: "Мой ребенок заболел и нужна операция. Стоимость 500,000 рублей. Семья не может справиться самостоятельно.",
    story: "Мой сын заболел серьезным заболеванием, которое требует срочной операции. Врачи говорят, что без операции состояние будет только ухудшаться. Мы обращались в различные фонды, но помощь пока не получена. Семья состоит из меня и мужа, мы работаем, но зарплаты хватает только на основные нужды. Операция стоит 500,000 рублей, а у нас есть только 50,000. Очень просим помочь!",
    amount: 500000,
    payment: "Сбербанк 1234 5678 9012 3456",
    category: "МЕДИЦИНА",
    status: "PENDING"
  },
  {
    title: "Помощь многодетной семье",
    summary: "Продукты и детские вещи",
    description: "Здравствуйте! Мы многодетная семья с 4 детьми. Муж потерял работу, а я не могу работать из-за маленького ребенка. Очень нужна помощь на продукты питания и детские вещи. Любая сумма будет огромной поддержкой для нас. Заранее благодарим за понимание и помощь!",
    story: "Здравствуйте! Мы многодетная семья с 4 детьми. Муж потерял работу, а я не могу работать из-за маленького ребенка. Очень нужна помощь на продукты питания и детские вещи. Любая сумма будет огромной поддержкой для нас. Заранее благодарим за понимание и помощь!",
    amount: 25000,
    payment: "ВТБ 9876 5432 1098 7654",
    category: "СЕМЬЯ",
    status: "APPROVED"
  },
  {
    title: "Образование",
    summary: "Оплата обучения",
    description: "Нужно оплатить обучение в университете. Семья не может позволить себе платное образование.",
    story: "Нужно оплатить обучение в университете. Семья не может позволить себе платное образование.",
    amount: 120000,
    payment: "Альфа-Банк 1111 2222 3333 4444",
    category: "ОБРАЗОВАНИЕ",
    status: "PENDING"
  },
  {
    title: "Ремонт квартиры после пожара",
    summary: "Восстановление после пожара",
    description: "Добрый день! В нашем доме произошел пожар, который повредил нашу квартиру. К сожалению, страховка не покрывает все расходы на восстановление. Нам нужно заменить электропроводку, окна, двери и сделать косметический ремонт. Мы обращаемся за помощью к добрым людям, которые смогут поддержать нас в этой сложной ситуации. Каждый рубль поможет нам быстрее вернуться к нормальной жизни и восстановить наш дом. Спасибо за понимание!",
    story: "Добрый день! В нашем доме произошел пожар, который повредил нашу квартиру. К сожалению, страховка не покрывает все расходы на восстановление. Нам нужно заменить электропроводку, окна, двери и сделать косметический ремонт. Мы обращаемся за помощью к добрым людям, которые смогут поддержать нас в этой сложной ситуации. Каждый рубль поможет нам быстрее вернуться к нормальной жизни и восстановить наш дом. Спасибо за понимание!",
    amount: 300000,
    payment: "Газпромбанк 5555 6666 7777 8888",
    category: "ЖИЛЬЕ",
    status: "REJECTED"
  },
  {
    title: "Покупка инвалидной коляски",
    summary: "Электрическая коляска",
    description: "Нужна электрическая инвалидная коляска для передвижения.",
    story: "Нужна электрическая инвалидная коляска для передвижения.",
    amount: 85000,
    payment: "Россельхозбанк 9999 8888 7777 6666",
    category: "МЕДИЦИНА",
    status: "PENDING"
  },
  {
    title: "Помощь бездомным животным",
    summary: "Приют для животных",
    description: "Привет! Мы небольшая группа волонтеров, которая помогает бездомным животным в нашем городе. За последние несколько месяцев мы подобрали более 50 кошек и собак, многих из которых лечили от различных заболеваний. Сейчас нам нужна помощь на корм, лекарства, вакцинацию и стерилизацию. Мы также планируем открыть небольшой приют для временного содержания животных до их пристройства в добрые руки. Любая поддержка поможет нам спасти больше жизней и дать шанс бездомным животным найти любящих хозяев.",
    story: "Привет! Мы небольшая группа волонтеров, которая помогает бездомным животным в нашем городе. За последние несколько месяцев мы подобрали более 50 кошек и собак, многих из которых лечили от различных заболеваний. Сейчас нам нужна помощь на корм, лекарства, вакцинацию и стерилизацию. Мы также планируем открыть небольшой приют для временного содержания животных до их пристройства в добрые руки. Любая поддержка поможет нам спасти больше жизней и дать шанс бездомным животным найти любящих хозяев.",
    amount: 150000,
    payment: "ЮниКредит 3333 4444 5555 6666",
    category: "ЖИВОТНЫЕ",
    status: "APPROVED"
  },
  {
    title: "Стоматология",
    summary: "Имплант зуба",
    description: "Нужно удалить зуб и поставить имплант.",
    story: "Нужно удалить зуб и поставить имплант.",
    amount: 45000,
    payment: "Тинькофф 7777 8888 9999 0000",
    category: "МЕДИЦИНА",
    status: "PENDING"
  },
  {
    title: "Сбор на открытие детского центра",
    summary: "Детский развивающий центр",
    description: "Мы хотим открыть детский развивающий центр для детей из малообеспеченных семей. Наш проект направлен на то, чтобы дать всем детям равные возможности для развития и образования. В центре будут проводиться занятия по рисованию, музыке, танцам, а также уроки английского языка и компьютерной грамотности. Мы планируем работать с детьми от 3 до 12 лет, предоставляя им качественное дополнительное образование совершенно бесплатно. Для реализации проекта нам нужно арендовать помещение, закупить мебель, оборудование и учебные материалы. Также мы хотим привлечь квалифицированных педагогов. Ваша поддержка поможет нам создать место, где каждый ребенок сможет раскрыть свои таланты и получить знания, которые пригодятся ему в будущем.",
    story: "Мы хотим открыть детский развивающий центр для детей из малообеспеченных семей. Наш проект направлен на то, чтобы дать всем детям равные возможности для развития и образования. В центре будут проводиться занятия по рисованию, музыке, танцам, а также уроки английского языка и компьютерной грамотности. Мы планируем работать с детьми от 3 до 12 лет, предоставляя им качественное дополнительное образование совершенно бесплатно. Для реализации проекта нам нужно арендовать помещение, закупить мебель, оборудование и учебные материалы. Также мы хотим привлечь квалифицированных педагогов. Ваша поддержка поможет нам создать место, где каждый ребенок сможет раскрыть свои таланты и получить знания, которые пригодятся ему в будущем.",
    amount: 500000,
    payment: "Открытие 1234 5678 9012 3456",
    category: "ОБРАЗОВАНИЕ",
    status: "PENDING"
  },
  {
    title: "Ремонт автомобиля",
    summary: "Капитальный ремонт двигателя",
    description: "Поломался двигатель, нужен капитальный ремонт. Машина нужна для работы.",
    story: "Поломался двигатель, нужен капитальный ремонт. Машина нужна для работы.",
    amount: 75000,
    payment: "Райффайзен 5555 4444 3333 2222",
    category: "ТРАНСПОРТ",
    status: "REJECTED"
  },
  {
    title: "Помощь пожилой соседке",
    summary: "Стиральная машина и холодильник",
    description: "Здравствуйте! Я пишу за свою соседку Анну Петровну, которой уже 78 лет. Она живет одна, пенсия очень маленькая, а недавно у неё сломалась стиральная машина и холодильник. Анна Петровна всегда помогала всем в доме, а теперь сама нуждается в помощи. Она очень стесняется просить, но без этих вещей ей очень тяжело. Мы хотим собрать деньги на покупку новой стиральной машины и холодильника. Анна Петровна заслуживает достойной старости, и мы надеемся, что добрые люди помогут ей в этом.",
    story: "Здравствуйте! Я пишу за свою соседку Анну Петровну, которой уже 78 лет. Она живет одна, пенсия очень маленькая, а недавно у неё сломалась стиральная машина и холодильник. Анна Петровна всегда помогала всем в доме, а теперь сама нуждается в помощи. Она очень стесняется просить, но без этих вещей ей очень тяжело. Мы хотим собрать деньги на покупку новой стиральной машины и холодильника. Анна Петровна заслуживает достойной старости, и мы надеемся, что добрые люди помогут ей в этом.",
    amount: 60000,
    payment: "Почта Банк 1111 3333 5555 7777",
    category: "СЕМЬЯ",
    status: "APPROVED"
  }
];

async function createTestApplications() {
  try {
    console.log('🚀 Начинаем создание 10 тестовых заявок...\n');

    // Получаем список пользователей для привязки заявок
    const users = await prisma.user.findMany({
      where: {
        email: {
          contains: 'test@example.com'
        }
      }
    });

    if (users.length === 0) {
      console.log('❌ Не найдено тестовых пользователей. Сначала создайте пользователей.');
      return;
    }

    console.log(`📋 Найдено ${users.length} тестовых пользователей\n`);

    for (let i = 0; i < testApplications.length; i++) {
      const appData = testApplications[i];
      
      // Выбираем случайного пользователя
      const randomUser = users[Math.floor(Math.random() * users.length)];
      
      // Создаем заявку
      const application = await prisma.application.create({
        data: {
          title: appData.title,
          summary: appData.summary,
          story: appData.story,
          amount: appData.amount,
          payment: appData.payment,
          status: appData.status,
          userId: randomUser.id,
          createdAt: new Date()
        }
      });

      const wordCount = appData.story.split(' ').length;
      console.log(`✅ ${i + 1}. Создана заявка: "${appData.title}"`);
      console.log(`   👤 Автор: ${randomUser.name}`);
      console.log(`   💰 Сумма: ${appData.amount.toLocaleString()} руб.`);
      console.log(`   📝 Описание: ${wordCount} слов`);
      console.log(`   📊 Статус: ${appData.status}`);
      console.log('');
    }

    console.log('🎉 Создание тестовых заявок завершено!');
    console.log('\n📈 Статистика заявок:');
    console.log('• PENDING (ожидают): 5 заявок');
    console.log('• APPROVED (одобрены): 3 заявки');
    console.log('• REJECTED (отклонены): 2 заявки');
    console.log('• Общая сумма: 1,425,000 рублей');
    
  } catch (error) {
    console.error('❌ Ошибка при создании заявок:', error);
  } finally {
    await prisma.$disconnect();
  }
}

// Запускаем скрипт
createTestApplications();
